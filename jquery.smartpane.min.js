/**
 * jQuery SmartPane
 * Licensed under the MIT license.
 * Copyright 2013 Takayuki Irokawa
 */
(function(a){var e=[],d=0;if(!1!==a.support.fixedPosition){var c=function(b,f){this.$self=a(b);this.$parent=this.$self.parent();this.type=f;this.init();this.$parent.css("position","relative")};c.each=function(b,a){for(var c=0;c<d;c++)b.call(e[c],a)};c.prototype={init:function(){this.$self.css({position:"relative",top:"0px",left:"0px"});this.position="top";var b=this.$self.offset();this.origTop=b.top;this.origLeft=b.left;this.parentTop=this.$parent.offset().top},refresh:function(b){this.height=this.$self.outerHeight(!0);this.parentHeight=this.$parent.outerHeight(!0);this.parentBottom=this.parentTop+this.parentHeight;var a;"top"===this.type?this.origTop<b.top?b.top+this.height<this.parentBottom?(a="fixed",this.fixedTop=0):a="bottom":a="top":"bottom"===this.type&&(this.origTop+this.height<b.bottom?b.bottom<this.parentBottom?(a="fixed",this.fixedTop=b.height-this.height):a="bottom":a=this.height<b.height?"bottom":"top");if(a!==this.position){switch(a){case "fixed":this.$self.css({position:"fixed",top:this.fixedTop+"px",left:this.origLeft+"px"});break;case "bottom":this.$self.css({position:"relative",top:this.parentHeight-this.height+"px",left:"0px"});break;case "top":this.$self.css({position:"relative",top:"0px",left:"0px"})}this.position=a}}};a.smartpane={init:function(){c.each(c.prototype.init);a.smartpane.scroll.apply(this)},scroll:function(){var b=a(window),b={top:b.scrollTop(),height:b.height()};b.bottom=b.top+b.height;c.each(c.prototype.refresh,b)}};a(function(){a("[data-smartpane]").each(function(){e.push(new c(this,a(this).data("smartpane")));d++});0!==d&&(a(window).resize(a.smartpane.init),a(window).scroll(a.smartpane.scroll),a.smartpane.init.apply(window))})}})(jQuery);