/**
 * jQuery SmartPane
 * Licensed under the MIT license.
 * Copyright 2013 Takayuki Irokawa
 */
(function(a){var d=[];!1!==a.support.fixedPosition&&(a.smartpane=function(c,b){this.$self=a(c);this.$parent=this.$self.parent();this.type=b;this.init();this.$parent.css("position","relative")},a.smartpane.prototype={init:function(){this.$self.css({position:"relative",top:"0px",left:"0px"});this.position="top";var a=this.$self.offset();this.origTop=a.top-parseInt(this.$self.css("margin-top"));this.origLeft=a.left-parseInt(this.$self.css("margin-left"));this.parentTop=this.$parent.offset().top},update:function(a){this.height=this.$self.outerHeight(!0);this.parentHeight=this.$parent.outerHeight(!0);this.parentBottom=this.parentTop+this.parentHeight;var b;"top"===this.type?this.origTop<a.top?a.top+this.height<this.parentBottom?(b="fixed",this.fixedTop=0):b="bottom":b="top":"bottom"===this.type&&(this.origTop+this.height<a.bottom?a.bottom<this.parentBottom?(b="fixed",this.fixedTop=a.height-this.height):b="bottom":b=this.height<a.height?"bottom":"top");if(b!==this.position){switch(b){case "fixed":this.$self.css({position:"fixed",top:this.fixedTop+"px",left:this.origLeft+"px"});break;case "bottom":this.$self.css({position:"relative",top:this.parentHeight-this.height+"px",left:"0px"});break;case "top":this.$self.css({position:"relative",top:"0px",left:"0px"})}this.position=b}}},a.extend(a.smartpane,{init:function(){a.smartpane.onresize.apply(this)},onresize:function(){a.each(d,a.smartpane.prototype.init);a.smartpane.onscroll.apply(this)},onscroll:function(){var c=a(window),c={top:c.scrollTop(),height:c.height()};c.bottom=c.top+c.height;a.each(d,a.smartpane.prototype.update,[c])}}),a.fn.smartpane=function(c){return this.each(function(){var b=a(this);void 0==b.data("smartpane")&&(b.data("smartpane",c),d.push(new a.smartpane(this,c)))})},a(function(){a("[data-smartpane]").each(function(){d.push(new a.smartpane(this,a(this).data("smartpane")))});a(window).resize(a.smartpane.onresize);a(window).scroll(a.smartpane.onscroll);a.smartpane.init.apply(window)}))})(jQuery);